<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wl.blog.dao.BlogListDao">

    <select id="blogList" resultType="com.wl.blog.Dto.BlogDto">
        SELECT b.title,b.abstractContent,b.labelId,b.classificationId,b.createTime,b.userId,
        tc.classificationId,tc.classificationName,b.id as bid,
        tbc.blogClassId,
        u.username,u.id,
        t.clickNum,t.blogId,
        tl.labelId,tl.labelName
        FROM tb_blog b
        INNER JOIN tb_contentcls tbc ON tbc.blogClassId=b.classificationId
        INNER JOIN tb_classification tc ON tc.classificationId=tbc.classificationId
        INNER JOIN tb_user u ON u.id=b.userId
        INNER JOIN tb_label tl ON tl.labelId=b.labelId
        INNER JOIN tb_click t ON t.blogId=b.id
        ORDER BY t.clickNum DESC
    </select>

    <select id="blogLiByCreate" resultType="com.wl.blog.Dto.BlogDto">
        SELECT b.title,b.abstractContent,b.labelId,b.classificationId,b.createTime,b.userId,
            tc.classificationId,tc.classificationName,b.id as bid,
            tbc.blogClassId,
            u.username,u.id,
            t.clickNum,t.blogId,
            tl.labelId,tl.labelName
        FROM tb_blog b
            INNER JOIN tb_contentcls tbc ON tbc.blogClassId=b.classificationId
            INNER JOIN tb_classification tc ON tc.classificationId=tbc.classificationId
            INNER JOIN tb_user u ON u.id=b.userId
            INNER JOIN tb_label tl ON tl.labelId=b.labelId
            INNER JOIN tb_click t ON t.blogId=b.id
        ORDER BY b.createTime DESC
        LIMIT 3
    </select>
</mapper>